"use strict";(self.webpackChunkmy_trello_frontend=self.webpackChunkmy_trello_frontend||[]).push([[312],{8312:(rt,Z,d)=>{d.r(Z),d.d(Z,{HomeModule:()=>v});var l=d(6895),u=d(433),F=d(529),c=d(4657),t=d(1571),E=d(4004);const M_baseURL="https://trello-back.shpp.me/vzolotykh/api/v1";var D=d(7185);class p{constructor(e,r){this.httpClient=e,this.notification=r,this.apiUrl=M_baseURL,this.boardUrl=this.apiUrl+"/board"}getBoards(){return this.httpClient.get(this.boardUrl,{headers:{Authorization:"Bearer 123"}}).pipe((0,E.U)(e=>e.boards))}getBoard(e){return this.httpClient.get(this.boardUrl+"/"+e,{headers:{Authorization:"Bearer 123"}})}createBoard(e){const r=this.httpClient.post(this.boardUrl,{title:e},{headers:{Authorization:"Bearer 123"},observe:"response"});return this.catchResponse(r,"\u0414\u043e\u0441\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430","\u0414\u043e\u0441\u043a\u0430 \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0430! \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0434\u043e\u0441\u043a\u0430 \u0441 \u0442\u0430\u043a\u0438\u043c \u0438\u043c\u0435\u043d\u0435\u043c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"),r}editBoard(e,r){const i=this.httpClient.put(this.boardUrl+"/"+e,{title:r},{headers:{Authorization:"Bearer 123"},observe:"response"});return this.catchResponse(i,"\u0414\u043e\u0441\u043a\u0430 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430","\u0414\u043e\u0441\u043a\u0430 \u043d\u0435 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430!"),i}deleteBoard(e){const r=this.httpClient.delete(this.boardUrl+"/"+e,{headers:{Authorization:"Bearer 123"},observe:"response"});return this.catchResponse(r,"\u0414\u043e\u0441\u043a\u0430 \u0443\u0434\u0430\u043b\u0435\u043d\u0430","\u0414\u043e\u0441\u043a\u0430 \u043d\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0430!"),r}catchResponse(e,r,i){e.subscribe(()=>{this.notification.success(r)},()=>{this.notification.error(i)})}}p.\u0275fac=function(e){return new(e||p)(t.LFG(F.eN),t.LFG(D._W))},p.\u0275prov=t.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"});class h{constructor(e,r){this.httpClient=e,this.notification=r,this.apiUrl=M_baseURL,this.boardUrl=this.apiUrl+"/board"}createList(e,r,i){const o=this.httpClient.post(this.boardUrl+"/"+e+"/list",{title:r,position:i},{headers:{Authorization:"Bearer 123"},observe:"response"});return this.catchResponse(o,"\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u043e\u0437\u0434\u0430\u043d!","\u0421\u043f\u0438\u0441\u043e\u043a \u043d\u0435 \u0441\u043e\u0437\u0434\u0430\u043d!"),o}editList(e,r,i){const o=this.httpClient.put(this.boardUrl+"/"+e+"/list/"+i,{title:r},{headers:{Authorization:"Bearer 123"},observe:"response"});return this.catchResponse(o,"\u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d!","\u0421\u043f\u0438\u0441\u043e\u043a \u043d\u0435 \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d!"),o}deleteList(e,r){const i=this.httpClient.delete(this.boardUrl+"/"+e+"/list/"+r,{headers:{Authorization:"Bearer 123"},observe:"response"});return this.catchResponse(i,"\u0421\u043f\u0438\u0441\u043e\u043a \u0443\u0434\u0430\u043b\u0435\u043d!","\u0421\u043f\u0438\u0441\u043e\u043a \u043d\u0435 \u0443\u0434\u0430\u043b\u0435\u043d!"),i}catchResponse(e,r,i){e.subscribe(()=>{this.notification.success(r)},()=>{this.notification.error(i)})}}h.\u0275fac=function(e){return new(e||h)(t.LFG(F.eN),t.LFG(D._W))},h.\u0275prov=t.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"});class _{constructor(e,r){this.httpClient=e,this.notification=r,this.apiUrl=M_baseURL,this.boardUrl=this.apiUrl+"/board"}createCard(e,r,i,o){return this.httpClient.post(this.boardUrl+"/"+e+"/card",{title:r,list_id:i,position:o},{headers:{Authorization:"Bearer 123"},observe:"response"})}deleteCard(e,r){return this.httpClient.delete(this.boardUrl+"/"+e+"/card/"+r,{headers:{Authorization:"Bearer 123"},observe:"response"})}editCard(e,r){return this.httpClient.put(this.boardUrl+"/"+r+"/card/",e,{headers:{Authorization:"Bearer 123"},observe:"response"})}catchResponse(e,r,i){e.subscribe(()=>{this.notification.success(r)},()=>{this.notification.error(i)})}}_.\u0275fac=function(e){return new(e||_)(t.LFG(F.eN),t.LFG(D._W))},_.\u0275prov=t.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"});var y=d(6497);class L{}L.\u0275fac=function(e){return new(e||L)},L.\u0275cmp=t.Xpm({type:L,selectors:[["tr-modal-window"]],decls:4,vars:0,template:function(e,r){1&e&&(t.TgZ(0,"p"),t._uU(1,"modal-window works!"),t.qZA(),t.TgZ(2,"h2"),t._uU(3,"\u0414\u0438\u043d\u0430\u043c\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0440\u043e\u0443\u0442 \u0432 \u043c\u043e\u0434\u0430\u043b\u044c\u043d\u043e\u043c \u043e\u043a\u043d\u0435"),t.qZA())},changeDetection:0});class B{constructor(e,r,i,o){this.cardsService=e,this.activatedRoute=r,this.router=i,this.dialog=o,this.titleCard="",this.idCard=0,this.idBoard=Number(this.activatedRoute.snapshot.paramMap.get("id")),this.cardDeleted=new t.vpe}deleteCard(){this.cardsService.deleteCard(this.idBoard,this.idCard).subscribe(()=>{this.cardDeleted.emit(this.idCard)})}mod(){this.router.navigateByUrl(`/board/${this.idBoard}/card/${this.idCard}`),this.dialog.open(L,{width:"500px"})}}function O(n,e){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),t.qZA())}function I(n,e){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u0435\u0435 2 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),t.qZA())}function J(n,e){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u0435\u0435 30 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"),t.qZA())}function U(n,e){1&n&&(t.TgZ(0,"div"),t._uU(1,"\u041d\u0435\u0434\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0439 \u0441\u0438\u043c\u0432\u043e\u043b"),t.qZA())}function S(n,e){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,O,2,0,"div",4),t.YNc(2,I,2,0,"div",4),t.YNc(3,J,2,0,"div",4),t.YNc(4,U,2,0,"div",4),t.qZA()),2&n){const r=t.oxw();t.xp6(1),t.Q6J("ngIf",r.valueControl.errors.required),t.xp6(1),t.Q6J("ngIf",r.valueControl.errors.minlength),t.xp6(1),t.Q6J("ngIf",r.valueControl.errors.maxlength),t.xp6(1),t.Q6J("ngIf",r.valueControl.errors.pattern)}}B.\u0275fac=function(e){return new(e||B)(t.Y36(_),t.Y36(c.gz),t.Y36(c.F0),t.Y36(y.uw))},B.\u0275cmp=t.Xpm({type:B,selectors:[["tr-card"]],inputs:{titleCard:"titleCard",idCard:"idCard",idBoard:"idBoard"},outputs:{cardDeleted:"cardDeleted"},decls:5,vars:1,consts:[[1,"content-card"],[1,"title","title__card"],[1,"btn","btn__del-card",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return r.deleteCard()}),t._uU(4,"x"),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(r.titleCard))},styles:[".content-card[_ngcontent-%COMP%]{background-color:var(--color_component);border-radius:6px;display:flex;justify-content:space-between;margin-bottom:25px}.content-card[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--color_hover_component)}.title__card[_ngcontent-%COMP%]{color:#000;margin:0 0 0 5px;font-size:20px;font-weight:700;word-break:break-all}.btn__del-card[_ngcontent-%COMP%]{border-radius:0;width:30px;background-color:#043c6e12;color:#000}"],changeDetection:0});const Y=function(n){return{"invalid-input":n}};class m{constructor(e){this.notification=e,this.previousValue="",this.lostFocus=new t.vpe,this.enter=new t.vpe,this.valueControl=new u.NI(this.previousValue,[u.kI.required,u.kI.minLength(2),u.kI.maxLength(30),u.kI.pattern(/^[\u0430-\u044fa-z\u0410-\u042fA-Z0-9_\s.-]*$/)])}ngOnInit(){this.valueControl.setValue(this.previousValue)}getValue(){return this.valueControl.invalid?(this.notification.warning("\u0412 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0438 \u0434\u043e\u043f\u0443\u0449\u0435\u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"),this.previousValue):this.valueControl.value||""}onBlur(){this.lostFocus.emit()}onEnter(){this.lostFocus.emit()}}function P(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"h2",7),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.editingList=!0)}),t._uU(1),t.qZA()}if(2&n){const r=t.oxw();t.xp6(1),t.hij(" ",r.titleList," ")}}function N(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"tr-simple-input-form",8,9),t.NdJ("enter",function(){t.CHM(r);const o=t.MAs(1),s=t.oxw();return t.KtG(s.editList(o.getValue()))})("lostFocus",function(){t.CHM(r);const o=t.MAs(1),s=t.oxw();return t.KtG(s.editList(o.getValue()))}),t.qZA()}if(2&n){const r=t.oxw();t.Q6J("previousValue",r.titleList)}}function H(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"tr-card",10),t.NdJ("cardDeleted",function(o){t.CHM(r);const s=t.oxw();return t.KtG(s.onCardDeleted(o))})("dragstart",function(o){const a=t.CHM(r).$implicit,x=t.oxw();return t.KtG(x.onDragStart(o,a))})("dragenter",function(o){const a=t.CHM(r).$implicit,x=t.oxw();return t.KtG(x.onDragEnter(o,a))})("dragleave",function(o){t.CHM(r);const s=t.oxw();return t.KtG(s.onDragLeave(o))})("drop",function(o){t.CHM(r);const s=t.oxw();return t.KtG(s.onDragDrop(o))}),t.qZA()}if(2&n){const r=e.$implicit;t.Q6J("titleCard",r.title)("idCard",r.id)}}function R(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.creatingCard=!0)}),t._uU(1," +\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443 "),t.qZA()}}function q(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"tr-simple-input-form",12,13),t.NdJ("enter",function(){t.CHM(r);const o=t.MAs(1),s=t.oxw();return t.KtG(s.createCard(o.getValue()))})("lostFocus",function(){t.CHM(r);const o=t.MAs(1),s=t.oxw();return t.KtG(s.createCard(o.getValue()))}),t.qZA()}}m.\u0275fac=function(e){return new(e||m)(t.Y36(D._W))},m.\u0275cmp=t.Xpm({type:m,selectors:[["tr-simple-input-form"]],inputs:{previousValue:"previousValue"},outputs:{lostFocus:"lostFocus",enter:"enter"},decls:3,vars:5,consts:[[1,"container__input-form"],[1,"input-form",3,"formControl","ngClass","keyup.enter","blur"],["class","error_message",4,"ngIf"],[1,"error_message"],[4,"ngIf"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"input",1),t.NdJ("keyup.enter",function(){return r.onEnter()})("blur",function(){return r.onBlur()}),t.qZA(),t.YNc(2,S,5,4,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("formControl",r.valueControl)("ngClass",t.VKq(3,Y,r.valueControl.invalid&&(r.valueControl.dirty||r.valueControl.touched))),t.xp6(1),t.Q6J("ngIf",r.valueControl&&r.valueControl.errors&&r.valueControl.invalid&&(r.valueControl.dirty||r.valueControl.touched)))},dependencies:[l.mk,l.O5,u.Fj,u.JJ,u.oH],styles:[".container__input-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.input-form[_ngcontent-%COMP%]{height:30px;border-radius:10px;margin-bottom:3px}.error_message[_ngcontent-%COMP%]{background-color:#650000;color:#f0f8ff;text-align:center;border-radius:5px;width:250px;z-index:10}.invalid-input[_ngcontent-%COMP%]{outline:2px solid rgb(102,3,3);border-color:#660303}"],changeDetection:0});class T{constructor(e,r,i,o,s){this.listsService=e,this.activatedRoute=r,this.cardsService=i,this.router=o,this.dialog=s,this.idList=0,this.titleList="",this.cardsList=[],this.listDeleted=new t.vpe,this.listEdited=new t.vpe,this.cardDeleted=new t.vpe,this.cardCreated=new t.vpe,this.cardDragged=new t.vpe,this.idBoard=Number(this.activatedRoute.snapshot.paramMap.get("id")),this.editingList=!1,this.creatingCard=!1,this.isCardCreated=!1,this.newPositionForCard=0}editList(e){e!=this.titleList&&null!=e&&null!=e&&this.listsService.editList(this.idBoard,e,this.idList).subscribe(()=>{this.listEdited.emit(this.titleList)}),this.editingList=!1}deleteList(){this.listsService.deleteList(this.idBoard,this.idList).subscribe(()=>{this.listDeleted.emit(this.idList)})}onCardDeleted(e){this.cardsList?.splice(this.cardsList.findIndex(r=>r.id===e),1)}createCard(e){if(this.creatingCard=!1,null!=e&&null!=e){const r=this.cardsList[this.cardsList?.length-1];let i=void 0===r?0:r.position;this.cardsService.createCard(this.idBoard,e,this.idList,++i).subscribe(()=>{this.cardCreated.emit(this.idList)})}}onDragStart(e,r){e.dataTransfer?.setData("application/json",JSON.stringify({idCard:r.id,idList:this.idList,position:r.position,initialList:this.list}))}onDragEnter(e,r){e.preventDefault();const i=e.target;if("content-card"===i.className&&this.cardsList){const o=i.getBoundingClientRect(),k=e.clientY-o.top<o.height/2;if(!i.parentElement?.querySelectorAll(".drop")?.length){const A=this.createDropZone();k?(i?.insertAdjacentElement("beforebegin",A),this.newPositionForCard=r.position):(i?.insertAdjacentElement("afterend",A),this.newPositionForCard=r.position+1)}}}onDragLeave(e){e.preventDefault();const i=e.target.closest(".card"),o=i.getBoundingClientRect();(e.clientX<o.left||e.clientX>o.right||e.clientY<o.top||e.clientY>o.bottom)&&i.querySelectorAll(".drop").forEach(a=>a.remove())}onDragDrop(e){e.preventDefault();const r=JSON.parse(e.dataTransfer.getData("application/json"));this.cardsService.editCard([{id:r.idCard,position:this.newPositionForCard,list_id:this.idList}],this.idBoard).subscribe(()=>{this.cardDragged.emit({currentListCards:this.cardsList,newPositionOfCard:this.newPositionForCard,currentIdList:this.idList,oldListCards:r.initialList,oldPositionOfCard:r.position,oldIdList:r.idList})}),e.target?.remove()}onDragEnterEmptyList(e){if(e.preventDefault(),!this.cardsList.length){const r=e.target;if(!r?.querySelectorAll(".drop")?.length){const o=this.createDropZone();r.lastElementChild?.insertAdjacentElement("beforebegin",o),this.newPositionForCard=1}}}onDragLeaveEmptyList(e){e.preventDefault();const r=e.target,i=r.getBoundingClientRect();(e.clientX<i.left||e.clientX>i.right||e.clientY<i.top||e.clientY>i.bottom-5)&&r.querySelectorAll(".drop").forEach(s=>s.remove())}createDropZone(){const e=document.createElement("div");return e.style.cssText="\n    width: auto;\n    height: 30px;\n    border-radius: 4px;\n    border: 1px dotted white;\n    background: rgba(120, 120, 193, 0.355);\n    margin-bottom: 20px;\n    margin-top: 10px;",e.addEventListener("dragover",r=>{r.preventDefault()}),e.classList.add("drop"),e}}function z(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"h1",9),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.editingBoard=!0)}),t._uU(1),t.qZA()}if(2&n){const r=t.oxw();t.xp6(1),t.hij(" ",null==r.board?null:r.board.title," ")}}function G(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"tr-simple-input-form",10,11),t.NdJ("enter",function(){t.CHM(r);const o=t.MAs(1),s=t.oxw();return t.KtG(s.editBoard(o.getValue()))})("lostFocus",function(){t.CHM(r);const o=t.MAs(1),s=t.oxw();return t.KtG(s.editBoard(o.getValue()))}),t.qZA()}if(2&n){const r=t.oxw();t.Q6J("previousValue",r.board.title)}}function Q(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"tr-list",12),t.NdJ("listDeleted",function(o){t.CHM(r);const s=t.oxw();return t.KtG(s.onListDeleted(o))})("listEdited",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.onListEdited())})("cardCreated",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.onCardCreated())})("cardDragged",function(o){t.CHM(r);const s=t.oxw();return t.KtG(s.onCardDragged(o))}),t.qZA()}if(2&n){const r=e.$implicit;t.Q6J("list",r)("titleList",r.title)("cardsList",r.cards)("idList",r.id)}}function K(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"button",13),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.creatingList=!0)}),t._uU(1," +\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a "),t.qZA()}}function V(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"div",14)(1,"label",15),t._uU(2,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435:"),t.qZA(),t._UZ(3,"tr-simple-input-form",null,16),t.TgZ(5,"button",17),t.NdJ("click",function(){t.CHM(r);const o=t.MAs(4),s=t.oxw();return t.KtG(s.createList(o.getValue()))}),t._uU(6," \u0421\u043e\u0437\u0434\u0430\u0442\u044c "),t.qZA()()}if(2&n){const r=t.MAs(4);t.xp6(5),t.Q6J("disabled",r.valueControl.invalid)}}T.\u0275fac=function(e){return new(e||T)(t.Y36(h),t.Y36(c.gz),t.Y36(_),t.Y36(c.F0),t.Y36(y.uw))},T.\u0275cmp=t.Xpm({type:T,selectors:[["tr-list"]],inputs:{list:"list",idList:"idList",titleList:"titleList",cardsList:"cardsList"},outputs:{listDeleted:"listDeleted",listEdited:"listEdited",cardDeleted:"cardDeleted",cardCreated:"cardCreated",cardDragged:"cardDragged"},decls:8,vars:5,consts:[[1,"container__body-list",3,"dragenter","dragleave","drop"],[1,"btn","btn__del-list",3,"click"],["class","title title__list",3,"click",4,"ngIf"],["class","input__edit-list",3,"previousValue","enter","lostFocus",4,"ngIf"],["class","card","draggable","true",3,"titleCard","idCard","cardDeleted","dragstart","dragenter","dragleave","drop",4,"ngFor","ngForOf"],["class","btn btn__add-card",3,"click",4,"ngIf"],["class","input__create-card",3,"enter","lostFocus",4,"ngIf"],[1,"title","title__list",3,"click"],[1,"input__edit-list",3,"previousValue","enter","lostFocus"],["inputEditList",""],["draggable","true",1,"card",3,"titleCard","idCard","cardDeleted","dragstart","dragenter","dragleave","drop"],[1,"btn","btn__add-card",3,"click"],[1,"input__create-card",3,"enter","lostFocus"],["inputCreateCard",""]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.NdJ("dragenter",function(o){return r.onDragEnterEmptyList(o)})("dragleave",function(o){return r.onDragLeaveEmptyList(o)})("drop",function(o){return r.onDragDrop(o)}),t.TgZ(1,"button",1),t.NdJ("click",function(){return r.deleteList()}),t._uU(2,"X"),t.qZA(),t.YNc(3,P,2,1,"h2",2),t.YNc(4,N,2,1,"tr-simple-input-form",3),t.YNc(5,H,1,2,"tr-card",4),t.YNc(6,R,2,0,"button",5),t.YNc(7,q,2,0,"tr-simple-input-form",6),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf",!r.editingList),t.xp6(1),t.Q6J("ngIf",r.editingList),t.xp6(1),t.Q6J("ngForOf",r.cardsList),t.xp6(1),t.Q6J("ngIf",!r.creatingCard),t.xp6(1),t.Q6J("ngIf",r.creatingCard))},dependencies:[l.sg,l.O5,B,m],styles:[".container__body-list[_ngcontent-%COMP%]{border:2px solid var(--color_border);margin-right:50px;width:250px;padding-left:10px;padding-right:10px;border-radius:25px}.btn__del-list[_ngcontent-%COMP%]{background-color:#f007;height:18px;width:20px;border-radius:5px;margin-top:5px;margin-bottom:5px;font-size:smaller}.title__list[_ngcontent-%COMP%]{word-wrap:break-word;width:250px;margin-top:0}.title__list[_ngcontent-%COMP%]:after{content:url(edit-pen.81a5f7824ac6c40e.png);padding-left:10px}.title__list[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline;transition:.5}.input__edit-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:5px;margin-bottom:25px;height:20px}.btn__add-card[_ngcontent-%COMP%]{border-radius:10px;margin-bottom:20px}.input__create-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:25px;margin-bottom:25px;height:20px}"],changeDetection:0});class f{constructor(e,r,i,o,s,a){this.activatedRoute=e,this.cdRef=r,this.boardService=i,this.router=o,this.listsService=s,this.cardsService=a,this.idBoard=Number(this.activatedRoute.snapshot.paramMap.get("id")),this.creatingList=!1,this.editingBoard=!1}ngOnInit(){this.initBoard(),console.log(this.board?.lists)}initBoard(){this.activatedRoute.data.subscribe(({board:e})=>{this.board=e})}linkToBack(){this.router.navigate(["/"])}editBoard(e){e!=this.board?.title&&null!=e&&null!=e&&this.boardService.editBoard(this.idBoard,e).subscribe(()=>{this.getBoard(this.idBoard)}),this.editingBoard=!1}deleteBoard(){this.boardService.deleteBoard(this.idBoard).subscribe(()=>{this.linkToBack()})}createList(e){if(this.creatingList=!1,null!=e&&null!=e){const r=this.board.lists,i=r[r?.length-1];let o=void 0===i?0:i.position;this.listsService.createList(this.idBoard,e,++o).subscribe(()=>{this.getBoard(this.idBoard)})}}onListDeleted(e){this.getBoard(this.idBoard)}onListEdited(){this.getBoard(this.idBoard)}onCardCreated(){this.getBoard(this.idBoard)}onCardDragged(e){const r=e.currentListCards.slice(e.newPositionOfCard-1),i=[];for(let o=0;o<r.length;o++)i.push({id:r[o].id,position:1+r[o].position,list_id:e.currentIdList});this.cardsService.editCard(i,this.idBoard).subscribe(()=>{this.getBoard(this.idBoard);const o=e.oldListCards.cards.slice(e.oldPositionOfCard),s=[];for(let a=0;a<o.length;a++)s.push({id:o[a].id,position:o[a].position-1,list_id:e.oldIdList});this.cardsService.editCard(s,this.idBoard).subscribe(()=>{this.getBoard(this.idBoard)})})}getBoard(e){this.boardService.getBoard(e).subscribe(r=>{this.board=r,this.cdRef.markForCheck()})}}f.\u0275fac=function(e){return new(e||f)(t.Y36(c.gz),t.Y36(t.sBO),t.Y36(p),t.Y36(c.F0),t.Y36(h),t.Y36(_))},f.\u0275cmp=t.Xpm({type:f,selectors:[["tr-board"]],decls:12,vars:5,consts:[[1,"container__head-board"],[1,"btn","btn__back-to-home",3,"click"],["class","title title__board",3,"click",4,"ngIf"],["class","input__edit-board",3,"previousValue","enter","lostFocus",4,"ngIf"],[1,"btn","btn__del-board",3,"click"],[1,"container__body-board"],[3,"list","titleList","cardsList","idList","listDeleted","listEdited","cardCreated","cardDragged",4,"ngFor","ngForOf"],["class","btn btn__add-list",3,"click",4,"ngIf"],["class","form form-create-list",4,"ngIf"],[1,"title","title__board",3,"click"],[1,"input__edit-board",3,"previousValue","enter","lostFocus"],["inputEditBoard",""],[3,"list","titleList","cardsList","idList","listDeleted","listEdited","cardCreated","cardDragged"],[1,"btn","btn__add-list",3,"click"],[1,"form","form-create-list"],[1,"title","title-form"],["inputCreateList",""],[1,"btn","btn__create-list",3,"disabled","click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return r.linkToBack()}),t._uU(2,"<"),t.qZA(),t.YNc(3,z,2,1,"h1",2),t.YNc(4,G,2,1,"tr-simple-input-form",3),t.TgZ(5,"button",4),t.NdJ("click",function(){return r.deleteBoard()}),t._uU(6,"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u043e\u0441\u043a\u0443"),t.qZA()(),t.TgZ(7,"div",5)(8,"ul"),t.YNc(9,Q,1,4,"tr-list",6),t.YNc(10,K,2,0,"button",7),t.YNc(11,V,7,1,"div",8),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngIf",!r.editingBoard),t.xp6(1),t.Q6J("ngIf",r.editingBoard),t.xp6(5),t.Q6J("ngForOf",null==r.board?null:r.board.lists),t.xp6(1),t.Q6J("ngIf",!r.creatingList),t.xp6(1),t.Q6J("ngIf",r.creatingList))},dependencies:[l.sg,l.O5,T,m],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:0}.container__head-board[_ngcontent-%COMP%]{overflow-x:hidden}.container__body-board[_ngcontent-%COMP%]{overflow-x:scroll;position:fixed;inset:100px 0 0}.btn__back-to-home[_ngcontent-%COMP%]{width:30px;height:30px;background-color:#ffffff2d;position:absolute;left:5px;top:10px;border-radius:5px}.title__board[_ngcontent-%COMP%]{width:650px;margin:20px auto}.title__board[_ngcontent-%COMP%]:after{content:url(edit-pen.81a5f7824ac6c40e.png);padding-left:10px}.title__board[_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline;transition:.5}.input__edit-board[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:25px}.btn__del-board[_ngcontent-%COMP%]{background-color:#f007;height:30px;width:200px;border-radius:5px;position:absolute;right:5px;top:10px}.btn__add-list[_ngcontent-%COMP%]{height:50px}.form-create-list[_ngcontent-%COMP%]{background-color:#f0f8ff3e;width:260px;height:150px;border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly}.title-form[_ngcontent-%COMP%]{font-size:large;font-weight:700}.btn__create-list[_ngcontent-%COMP%]{background-color:#00ffbc5c}"],changeDetection:0});var j=d(3900);const X=function(n){return["board/",n]};function $(n,e){if(1&n&&(t.TgZ(0,"div",5)(1,"a",6),t._uU(2),t.qZA()()),2&n){const r=e.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(2,X,r.id)),t.xp6(1),t.hij("",r.title," ")}}function W(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"div",7)(1,"label",8),t._uU(2,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t._UZ(3,"tr-simple-input-form",null,9),t.TgZ(5,"button",10),t.NdJ("click",function(){t.CHM(r);const o=t.MAs(4),s=t.oxw();return t.KtG(s.createBoard(o.getValue()))}),t._uU(6," \u0421\u043e\u0437\u0434\u0430\u0442\u044c "),t.qZA()()}if(2&n){const r=t.MAs(4);t.xp6(5),t.Q6J("disabled",r.valueControl.invalid)}}function tt(n,e){if(1&n){const r=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(r);const o=t.oxw();return t.KtG(o.creatingBoard=!0)}),t._uU(1," +\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0441\u043a\u0443 "),t.qZA()}}class w{constructor(e,r,i){this.activatedRoute=e,this.cdRef=r,this.boardService=i,this.boards=[],this.creatingBoard=!1}ngOnInit(){this.initBoards()}initBoards(){this.activatedRoute.data.subscribe(({boards:e})=>{this.boards=e})}createBoard(e){null!=e&&null!=e&&this.boardService.createBoard(e).pipe((0,j.w)(()=>this.boardService.getBoards())).subscribe(r=>{this.boards=r,this.cdRef.markForCheck()}),this.creatingBoard=!1}}w.\u0275fac=function(e){return new(e||w)(t.Y36(c.gz),t.Y36(t.sBO),t.Y36(p))},w.\u0275cmp=t.Xpm({type:w,selectors:[["tr-home"]],decls:6,vars:3,consts:[[1,"title","title__boards"],[1,"container__body-boards"],["class","board",4,"ngFor","ngForOf"],["class","form form-create-board",4,"ngIf"],["class","btn btn__add-board",3,"click",4,"ngIf"],[1,"board"],[1,"title","title__board",3,"routerLink"],[1,"form","form-create-board"],[1,"title","title-form"],["inputCreateBoard",""],["type","submit",1,"btn","btn__create-board",3,"disabled","click"],[1,"btn","btn__add-board",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"h1",0),t._uU(1,"\u041c\u043e\u0438 \u0434\u043e\u0441\u043a\u0438"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,$,3,4,"div",2),t.YNc(4,W,7,1,"div",3),t.YNc(5,tt,2,0,"button",4),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngForOf",r.boards),t.xp6(1),t.Q6J("ngIf",r.creatingBoard),t.xp6(1),t.Q6J("ngIf",!r.creatingBoard))},dependencies:[l.sg,l.O5,c.rH,m],styles:[".title__boards[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:40px}.container__body-boards[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}.board[_ngcontent-%COMP%]{font-size:large;font-weight:600;display:flex;justify-content:center;align-items:center;text-align:center;width:220px;height:100px;border:3px solid var(--color_border);border-radius:45px;margin-right:30px;margin-bottom:30px;background-color:var(--color_component)}.board[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:var(--color_hover_component)}.title__board[_ngcontent-%COMP%]{width:200px;color:#000;word-break:break-all}.btn__add-board[_ngcontent-%COMP%]{width:250px;height:100px;border:3px solid var(--color_border);border-radius:45px;margin-right:30px;margin-bottom:30px}.form-create-board[_ngcontent-%COMP%]{background-color:#f0f8ff3e;width:260px;height:150px;border-radius:8px;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly}.title-form[_ngcontent-%COMP%]{font-size:large;font-weight:700}.btn__create-board[_ngcontent-%COMP%]{background-color:#00ffbc5c;border-radius:30px}"],changeDetection:0});class g{constructor(e){this.boardsService=e}resolve(e){const r=Number(e.paramMap.get("id"));return this.boardsService.getBoard(r)}}g.\u0275fac=function(e){return new(e||g)(t.LFG(p))},g.\u0275prov=t.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"});class C{constructor(e){this.boardsService=e}resolve(){return this.boardsService.getBoards()}}C.\u0275fac=function(e){return new(e||C)(t.LFG(p))},C.\u0275prov=t.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"});const et=[{path:"",component:w,resolve:{boards:C}},{path:"board/:id",component:f,resolve:{board:g}},{path:"board/:id/card/:id",component:f,resolve:{board:g}}];class b{}b.\u0275fac=function(e){return new(e||b)},b.\u0275mod=t.oAB({type:b}),b.\u0275inj=t.cJS({imports:[c.Bz.forChild(et),c.Bz]});class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({imports:[l.ez,b,u.UX,F.JF]})}}]);